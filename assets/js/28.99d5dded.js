(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{249:function(e,t,i){"use strict";i(45),i(63);var n=i(17),s=i(26),r=function(){function e(t,i,s){Object(n.a)(this,e),this.target=t,this.eventType=i,this.listen(s)}return Object(s.a)(e,[{key:"listen",value:function(e){this._eventRemovers||(this._eventRemovers=[]),this.target.addEventListener(this.eventType,e);var t=this;this._eventRemovers.push({remove:function(){t.target.removeEventListener(t.eventType,e)}})}},{key:"destroy",value:function(){this._eventRemovers&&this._eventRemovers.forEach(function(e){e.remove()})}}]),e}();t.a=r},316:function(e,t,i){"use strict";t.a="#define GLSLIFY 1\n#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\n\nvoid main(void) {\nvUv = uv;\ngl_Position = vec4(position, 1.0);\n}\n"},318:function(e,t,i){},324:function(e,t,i){"use strict";var n=i(17),s=i(26),r=i(254),a=function(){function e(t,i){return Object(n.a)(this,e),this.width=t,this.height=i,this.uniforms={resolution:{type:"v2",value:new r.Vector2(this.width,this.height)},imageResolution:{type:"v2",value:null},texture:{type:"t",value:null}},this.mesh=null,this.geometry=null,this.material=null,this}return Object(s.a)(e,[{key:"init",value:function(e,t){var i=this,n=new r.TextureLoader;n.crossOrigin="Anonymous",n.load(e,function(e){e.magFilter=e.minFilter=r.LinearFilter,i.uniforms.imageResolution.value=new r.Vector2(e.image.width,e.image.height),i.uniforms.texture.value=e,i.mesh=i.createMesh(),t()})}},{key:"createMesh",value:function(){return this.geometry=new r.PlaneBufferGeometry(2,2),this.material=new r.RawShaderMaterial({uniforms:this.uniforms,vertexShader:"#define GLSLIFY 1\n#define GLSLIFY 1\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\n\nvoid main(void) {\nvUv = uv;\ngl_Position = vec4(position, 1.0);\n}\n",fragmentShader:"precision highp float;\n#define GLSLIFY 1\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform vec2 imageResolution;\nuniform sampler2D texture;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n// 画角の調整\nvec2 ratio = vec2(\n    min((resolution.x / resolution.y) / (imageResolution.x / imageResolution.y), 1.0),\n    min((resolution.y / resolution.x) / (imageResolution.y / imageResolution.x), 1.0)\n  );\nvec2 uv = vec2(\n    vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,\n    vUv.y * ratio.y + (1.0 - ratio.y) * 0.5\n  );\n\ngl_FragColor = texture2D(texture, uv);\n}\n"}),new r.Mesh(this.geometry,this.material)}},{key:"resize",value:function(){this.uniforms.resolution.value.set(this.width,this.height)}},{key:"destroy",value:function(){this.geometry.dispose(),this.material.dispose()}}]),e}();t.a=a},388:function(e,t,i){"use strict";var n=i(318);i.n(n).a},400:function(e,t,i){"use strict";i.r(t);i(45),i(63);var n=i(17),s=i(26),r=i(254),a=i(249),o=i(324),h=i(316),u=function(){function e(t,i,s){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;Object(n.a)(this,e),this.width=i,this.height=s,this.texture=t,this.wrap=a,this.wrapW=a.getBoundingClientRect().width||window.innerWidth,this.wrapH=a.getBoundingClientRect().height||window.innerHeight,this.mouse={x:this.wrapW/2,y:this.wrapH/2},this.targetPosition={x:this.wrapW/2,y:this.wrapH/2},this._eventList=[],this.uniforms={time:{type:"f",value:0},resolution:{type:"v2",value:new r.Vector2(this.width,this.height)},texture:{type:"t",value:this.texture},mouse:{type:"v2",value:new r.Vector2(this.targetPosition.x,this.targetPosition.y)}},this.eventAttach(),this.createMesh()}return Object(s.a)(e,[{key:"createMesh",value:function(){this.geometry=new r.PlaneBufferGeometry(2,2),this.material=new r.RawShaderMaterial({uniforms:this.uniforms,vertexShader:h.a,fragmentShader:"precision highp float;\n#define GLSLIFY 1\n#define GLSLIFY 1\n\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D texture;\nuniform vec2 mouse;\n\nvarying vec2 vUv;\n\n// start script\nvoid main(void) {\n\n  // 揺れ\n  vec2 shake = vec2(mouse.x / 50000.0, -mouse.y / 50000.0) * 2.0;\n\n  float y = vUv.y * resolution.y;\n  float x = vUv.x * resolution.x;\n\n  float r = texture2D(texture, vec2(vUv.x, vUv.y) - shake).r;\n  float g = texture2D(texture, vec2(vUv.x, vUv.y) - shake * 2.0).g;\n  float b = texture2D(texture, vec2(vUv.x, vUv.y) - shake * 4.0).b;\n\n  gl_FragColor = vec4(r, g, b, 1.0);\n\n}\n"}),this.mesh=new r.Mesh(this.geometry,this.material)}},{key:"render",value:function(e){this.uniforms.time.value+=e,this.distCenter()}},{key:"distCenter",value:function(){this.targetPosition.x+=.075*(this.mouse.x-this.targetPosition.x),this.targetPosition.y+=.075*(this.mouse.y-this.targetPosition.y);var e=this.targetPosition.x-this.wrapW/2,t=this.targetPosition.y-this.wrapH/2;this.uniforms.mouse.value.x=e,this.uniforms.mouse.value.y=t}},{key:"getMousePosition",value:function(e){this.mouse.x=this.wrap===window?e.clientX:e.offsetX,this.mouse.y=this.wrap===window?e.clientY:e.offsetY}},{key:"resetMousePosition",value:function(){this.mouse.x=this.wrapW/2,this.mouse.y=this.wrapH/2}},{key:"eventAttach",value:function(){var e=this;this._eventList.push(new a.a(this.wrap,"mousemove",function(t){return e.getMousePosition(t)}));this._eventList.push(new a.a(this.wrap,"mouseleave",function(t){return e.resetMousePosition()}))}},{key:"eventRemove",value:function(){this._eventList.forEach(function(e){return e.destroy()})}},{key:"resize",value:function(){this.uniforms.resolution.value.set(this.width,this.height)}},{key:"destroy",value:function(){this.geometry.dispose(),this.material.dispose(),this.eventRemove()}}]),e}(),v=function(){function e(t){var i=t.canvas,s=t.wrap;Object(n.a)(this,e),this.canvas=i,this.wrap=s,this.wrapperW=this.wrap.offsetWidth,this.wrapperH=this.wrap.offsetHeight,this.scene=new r.Scene,this.sceneBg=new r.Scene,this.clock=new r.Clock,this.animId=0,this._eventList=[],this.init()}return Object(s.a)(e,[{key:"init",value:function(){this.createRenderer(),this.createCamera(),this.createMesh(),this.eventAttach(),this.resizeWindow(),this.render()}},{key:"createMesh",value:function(){var e=this;this.bgImg=new o.a(this.wrapperW,this.wrapperH),this.postEffect=new u(this.renderBg.texture,this.wrapperW,this.wrapperH,this.wrap),this.bgImg.init("/images/girl/01.jpg",function(){e.sceneBg.add(e.bgImg.mesh),e.scene.add(e.postEffect.mesh)})}},{key:"createRenderer",value:function(){this.renderBg=new r.WebGLRenderTarget(this.wrapperW,this.wrapperH),this.renderer=new r.WebGLRenderer({antialias:!1,canvas:this.canvas}),this.renderer.setSize(this.wrapperW,this.wrapperH),this.renderer.setClearColor(1118481,1)}},{key:"createCamera",value:function(){this.camera=new r.OrthographicCamera(-1,1,1,-1,0,1),this.cameraBack=new r.PerspectiveCamera(45,this.wrapperW/this.wrapperH,1,1e4),this.cameraBack.position.set(0,0,100),this.cameraBack.lookAt(new r.Vector3)}},{key:"render",value:function(){var e=this;this.renderer.setRenderTarget(this.renderBg),this.renderer.render(this.sceneBg,this.cameraBack),this.postEffect.render(this.clock.getDelta()),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera);this.animId=requestAnimationFrame(function(){return e.render()})}},{key:"eventAttach",value:function(){var e=this;this._eventList.push(new a.a(window,"resize",function(){return t=function(){e.resizeWindow()},i=1e3/30,function(e){clearTimeout(n),n=setTimeout(function(){t(e)},i)};var t,i,n}))}},{key:"eventRemove",value:function(){this._eventList.forEach(function(e){return e.destroy()})}},{key:"resizeWindow",value:function(){this.canvas.width=this.wrapperW,this.canvas.height=this.wrapperH,this.cameraBack.aspect=this.wrapperW/this.wrapperH,this.cameraBack.updateProjectionMatrix(),this.bgImg.resize(),this.postEffect.resize(),this.renderBg.setSize(this.wrapperW,this.wrapperH),this.renderer.setSize(this.wrapperW,this.wrapperH)}},{key:"destroy",value:function(){this.sceneBg.remove(this.bgImg.mesh),this.scene.remove(this.postEffect.mesh),cancelAnimationFrame(this.animId),this.bgImg.destroy(),this.postEffect.destroy(),this.eventRemove()}}]),e}();var c={name:"ShiftImage",data:function(){return{glitch:null}},mounted:function(){this.glitch=new v({canvas:this.$refs.canvas,wrap:this.$refs.wrap})},beforeDestroy:function(){this.glitch.destroy()}},l=(i(388),i(25)),m=Object(l.a)(c,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"wrap",staticClass:"wrap"},[t("canvas",{ref:"canvas",staticClass:"canvas",attrs:{id:"canvas"}})])},[],!1,null,"7b236889",null);t.default=m.exports}}]);