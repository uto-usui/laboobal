(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{339:function(e,t,i){i(2)({target:"Function",proto:!0},{bind:i(179)})},352:function(e,t,i){"use strict";var n=i(184),s=i(183),r=i(10),a=i(23),o=i(108),h=i(185),l=i(15),u=i(186),c=i(81),d=i(3),f=[].push,v=Math.min,g=!d((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(e,t,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var n=String(a(this)),r=void 0===i?4294967295:i>>>0;if(0===r)return[];if(void 0===e)return[n];if(!s(e))return t.call(n,e,r);for(var o,h,l,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,g=new RegExp(e.source,d+"g");(o=c.call(g,n))&&!((h=g.lastIndex)>v&&(u.push(n.slice(v,o.index)),o.length>1&&o.index<n.length&&f.apply(u,o.slice(1)),l=o[0].length,v=h,u.length>=r));)g.lastIndex===o.index&&g.lastIndex++;return v===n.length?!l&&g.test("")||u.push(""):u.push(n.slice(v)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var s=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,s,i):n.call(String(s),t,i)},function(e,s){var a=i(n,e,this,s,n!==t);if(a.done)return a.value;var c=r(e),d=String(this),f=o(c,RegExp),m=c.unicode,p=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),w=new f(g?c:"^(?:"+c.source+")",p),x=void 0===s?4294967295:s>>>0;if(0===x)return[];if(0===d.length)return null===u(w,d)?[d]:[];for(var S=0,y=0,M=[];y<d.length;){w.lastIndex=g?y:0;var z,P=u(w,g?d:d.slice(y));if(null===P||(z=v(l(w.lastIndex+(g?0:y)),d.length))===S)y=h(d,y,m);else{if(M.push(d.slice(S,y)),M.length===x)return M;for(var b=1;b<=P.length-1;b++)if(M.push(P[b]),M.length===x)return M;y=S=z}}return M.push(d.slice(S)),M}]}),!g)},355:function(e,t,i){var n=i(2),s=i(356);n({global:!0,forced:parseInt!=s},{parseInt:s})},356:function(e,t,i){var n=i(5),s=i(187).trim,r=i(188),a=n.parseInt,o=/^[+-]?0[Xx]/,h=8!==a(r+"08")||22!==a(r+"0x16");e.exports=h?function(e,t){var i=s(String(e));return a(i,t>>>0||(o.test(i)?16:10))}:a},385:function(e,t,i){},471:function(e,t,i){"use strict";var n=i(385);i.n(n).a},574:function(e,t,i){"use strict";i.r(t);i(182),i(74),i(339),i(355),i(51),i(352);var n=i(20),s=i(29),r=i(342),a=i(320),o=function(e){return"\n  uniform float uProgress;\n  uniform vec2 uMeshScale;\n  uniform vec2 uMeshPosition;\n  uniform vec2 uViewSize;\n\n\n  void main(){\n    vec3 pos = position.xyz;\n\n    ".concat(e,"\n\n    float latestStart = 0.5;\n    float startAt = activation * latestStart;\n    float vertexProgress = smoothstep(startAt,1.,uProgress);\n\n    // Scale to page view size/page size\n    vec2 scaleToViewSize = uViewSize / uMeshScale - 1.;\n    vec2 scale = vec2(\n      1. + scaleToViewSize * vertexProgress\n    );\n    pos.xy *= scale;\n\n    // Move towards center\n    pos.y += -uMeshPosition.y * vertexProgress;\n    pos.x += -uMeshPosition.x * vertexProgress;\n\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n\n  }\n")},h="\n  uniform vec3 uColor;\n\n  void main(){\n    vec3 color = uColor /255.;\n    gl_FragColor = vec4(color,1.);\n  }\n",l=o("\n  float activation = uv.x;\n"),u=function(){function e(t){var i=t.canvas,s=t.items;Object(n.a)(this,e),this.canvas=i,this.items=s,this.camera=null,this.scene=null,this.renderer=null,this.width=i.offsetWidth,this.height=i.offsetHeight,console.log(this.width,this.height),this.vertexShader=l,this.fragmentShader=h,this.uniforms={uProgress:new r.Uniform(0),uMeshScale:new r.Uniform(new r.Vector2(1,1)),uMeshPosition:new r.Uniform(new r.Vector2(0,0)),uViewSize:new r.Uniform(new r.Vector2(1,1)),uColor:new r.Uniform(new r.Vector3(20,20,20))},this.animating=!1,this.state="grid",this.itemIndex=-1}return Object(s.a)(e,[{key:"toGrid",value:function(){var e=this;"grid"===this.state||this.isAnimating||(this.animating=!0,this.tween=a.g.to(this.uniforms.uProgress,1,{value:0,onUpdate:this.render.bind(this),onComplete:function(){e.isAnimating=!1,e.state="grid",e.canvas.style.zIndex=-1,e.items[e.itemIndex].style.opacity=1}}))}},{key:"toFullscreen",value:function(){var e=this;"fullscreen"===this.state||this.isAnimating||(this.animating=!0,this.canvas.style.zIndex=2,this.items[this.itemIndex].style.opacity=0,this.tween=a.g.to(this.uniforms.uProgress,1,{value:1,onUpdate:this.render.bind(this),onComplete:function(){e.isAnimating=!1,e.state="fullscreen",e.toGrid()}}))}},{key:"init",value:function(){var e=this;this.renderer=new r.WebGLRenderer({canvas:this.canvas,alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.scene=new r.Scene,this.camera=new r.PerspectiveCamera(45,this.width/this.height,.1,1e4),this.camera.position.z=50,this.camera.lookAt=this.scene.position;var t=this.getViewSize();this.uniforms.uViewSize.value.x=t.width,this.uniforms.uViewSize.value.y=t.height;var i=new r.PlaneBufferGeometry(1,1,128,128),n=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,side:r.DoubleSide});this.mesh=new r.Mesh(i,n),this.scene.add(this.mesh),window.addEventListener("resize",this.onResize.bind(this));for(var s=function(t){e.items[t].addEventListener("click",(function(i){return e.onGridImageClick(i,t)}))},a=0;a<this.items.length;a++)s(a);this.vertexShader=this.setVertex(o("\n  float activation = uv.x;\n"))}},{key:"updateMesh",value:function(){if(-1!==this.itemIndex){var e=this.items[this.itemIndex],t=e.getBoundingClientRect(),i=this.canvas.getBoundingClientRect(),n=this.getViewSize(),s=t.width*n.width/this.width,r=t.height*n.height/this.height,a=(t.left-i.left)*n.width/this.width,o=(t.top-i.top)*n.height/this.height,h=(a-=n.width/2)+s/2,l=-(o-=n.height/2)-r/2,u=this.mesh;u.scale.x=s,u.scale.y=r,u.position.x=h,u.position.y=l,this.uniforms.uMeshPosition.value.x=h/s,this.uniforms.uMeshPosition.value.y=l/r,this.uniforms.uMeshScale.value.x=s,this.uniforms.uMeshScale.value.y=r;var c=window.getComputedStyle(e).getPropertyValue("background-color"),d=(c=c.substring(c.indexOf("(")+1,c.indexOf(")"))).split(",",3).map((function(e){return parseInt(e)}));this.uniforms.uColor.value.x=d[0],this.uniforms.uColor.value.y=d[1],this.uniforms.uColor.value.z=d[2]}}},{key:"onGridImageClick",value:function(e,t){console.log("click"),this.itemIndex=t,this.updateMesh(),this.toFullscreen()}},{key:"setVertex",value:function(e){this.mesh.material.vertexShader=e,this.mesh.material.needsUpdate=!0}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"getViewSize",value:function(){var e=this.camera.fov*Math.PI/180,t=Math.abs(this.camera.position.z*Math.tan(e/2)*2);return{width:t*this.camera.aspect,height:t}}},{key:"onResize",value:function(){this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.updateMesh(),this.render()}}]),e}(),c={name:"ThreeScale",data:function(){return{scale:null}},watch:{},mounted:function(){this.scale=new u({canvas:this.$refs.canvas,items:this.$refs.item}),this.scale.init()},beforeDestroy:function(){},methods:{}},d=(i(471),i(28)),f=Object(d.a)(c,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"wrap",staticClass:"wrap"},[t("canvas",{ref:"canvas",staticClass:"canvas",attrs:{id:"canvas"}}),this._v(" "),t("ul",{staticClass:"list"},this._l(2,(function(e){return t("li",{key:"listItem"+e,ref:"item",refInFor:!0,staticClass:"list__item"})})),0)])}),[],!1,null,"e4b988a8",null);t.default=f.exports}}]);